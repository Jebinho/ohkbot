[null,{"name":"Bem vindo","permissions":"NONE","restriction":"1","_id":"DKHjb","actions":[{"comment":"790977647928541206","color":"#00ff00","name":"Comment"},{"info":"0","find":"790977647928541206","storage":"1","varName":"bv-channel","name":"Find Channel"},{"comment":"Informações do new member","color":"#00ff00","name":"Comment"},{"member":"2","varName":"new-member","info":"1","storage":"1","varName2":"m-id","name":"Store Member Info"},{"member":"2","varName":"new-member","info":"21","storage":"1","varName2":"m-tag","name":"Store Member Info"},{"member":"2","varName":"new-member","info":"16","storage":"1","varName2":"m-avatar","name":"Store Member Info"},{"member":"2","varName":"new-member","info":"24","storage":"1","varName2":"m-joined-at","name":"Store Member Info"},{"member":"2","varName":"new-member","info":"22","storage":"1","varName2":"m-created-at","name":"Store Member Info"},{"comment":"Informações do servidor","color":"#00ff00","name":"Comment"},{"server":"0","varName":"","info":"2","storage":"1","varName2":"sv-name","name":"Store Server Info"},{"server":"0","varName":"","info":"5","storage":"1","varName2":"sv-icon","name":"Store Server Info"},{"server":"0","varName":"","info":"35","storage":"1","varName2":"sv-human-count","name":"Store Server Info"},{"comment":"Criando a Embed Message","color":"#00ff00","name":"Comment"},{"date":"${tempVars(\"m-created-at\")}","info":"4","storage":"1","varName":"dia","name":"Store Date Info"},{"date":"${tempVars(\"m-created-at\")}","info":"8","storage":"1","varName":"mes","name":"Store Date Info"},{"date":"${tempVars(\"m-created-at\")}","info":"5","storage":"1","varName":"ano","name":"Store Date Info"},{"date":"${tempVars(\"m-joined-at\")}","info":"4","storage":"1","varName":"j-dia","name":"Store Date Info"},{"date":"${tempVars(\"m-joined-at\")}","info":"8","storage":"1","varName":"j-mes","name":"Store Date Info"},{"date":"${tempVars(\"m-joined-at\")}","info":"5","storage":"1","varName":"j-ano","name":"Store Date Info"},{"title":"Bem vindo ao ${tempVars(\"sv-name\")}!","author":"${tempVars(\"m-tag\")}","color":"GREEN","url":"","authorIcon":"${tempVars(\"m-avatar\")}","authorUrl":"","imageUrl":"","thumbUrl":"${tempVars(\"sv-icon\")}","timestamp":"true","debug":"false","text":"","year":"","month":"","day":"","hour":"","minute":"","second":"","storage":"1","varName":"embed-bem-vindo","name":"Create Embed Message"},{"comment":"Edite a descrição para sua mensagem","color":"#00ff00","name":"Comment"},{"storage":"1","varName":"embed-bem-vindo","message":"Essa é uma descrição de teste para uma mensagem de boas vindas no servidor privado de discord, criado com Discord Bot Maker.\n\nPor favor leia as **Regras**","name":"Set Embed Description"},{"storage":"1","varName":"embed-bem-vindo","fieldName":"Conta Criada","message":"${tempVars(\"dia\")}/${tempVars(\"mes\")}/${tempVars(\"ano\")}","inline":"0","name":"Add Embed Field"},{"storage":"1","varName":"embed-bem-vindo","fieldName":"Entrada","message":"${tempVars(\"j-dia\")}/${tempVars(\"j-mes\")}/${tempVars(\"j-ano\")}","inline":"0","name":"Add Embed Field"},{"storage":"1","varName":"embed-bem-vindo","fieldName":"Membros","message":"${tempVars(\"sv-human-count\")}","inline":"0","name":"Add Embed Field"},{"storage":"1","varName":"embed-bem-vindo","channel":"5","varName2":"bv-channel","storage3":"0","varName3":"","iffalse":"0","iffalseVal":"","messageContent":"","name":"Send Embed Message"},{"name":"End Action Sequence"}],"event-type":"6","temp":"new-member"},{"name":"SorteioCheck","temp":"10","event-type":"3","_id":"eavvT","actions":[{"code":"const fs = require('fs');\nconst Discord = require('discord.js');\nlet giveawaysDue = [];\nvar timeNow = Math.floor(Date.now() / 1000);\nvar counter = 0;\nvar interval;\nif (globalVars(\"giveawayRan\") == null) {\n this.storeValue(1,3,\"giveawayRan\",cache);\n\n fs.readFile('./data/giveawayData.json', async function read(err, data) {\n if (err) {\n throw err;\n }\n data = JSON.parse(data);\n \n for (var key in data) {\n if (data.hasOwnProperty(key)) {\n let giveaways = data[key];\n                let dueGive = await giveaways.filter(({\n finishUnix\n }) => finishUnix <= timeNow);\n if (dueGive.length > 0) {\n dueGive.forEach(async f => {\n giveawaysDue.push(f);\n giveaways.splice(giveaways.findIndex(e => e.id === f.id), 1)\n });\n \n fs.writeFile(\"./data/giveawayData.json\", JSON.stringify(data), function(err) {\n if (err) {\n return console.log(err);\n }\n });\n }\n }\n }\n if (giveawaysDue.length > 0) {\n interval = setInterval(drawWinners, 2000);\n }\n \n })\n}\n\nasync function drawWinners() {\n var channelToFetch = await client.channels.cache.get(giveawaysDue[counter][\"channel\"]);\n if (channelToFetch != null) {\n var giveawayMessage = await channelToFetch.messages.fetch(giveawaysDue[counter][\"giveawayMessageID\"]);\n var giveawayEmojiCache = giveawayMessage.reactions.cache.get('?');\n var giveawayUsers = await giveawayEmojiCache.users.fetch();\n            if (giveawayEmojiCache.count > 100) {\n for (i=0; i object.id != client.user.id);\n var numberOfWinners = parseInt(giveawaysDue[counter][\"winner\"]);\n var gw = giveawayMessage.embeds[0];\n\n gw.color = 0x000000;\n if (gw.fields.length == 6) {\n gw.fields[5].value = \"Finalizado\"\n }\n gw.description = \"**Sorteio Finalizado**\\n\\n\" + gw.description\n\n var winnerArray = [];\n var winnerText = \"\";\n if (giveawayUsers.length > 0) {\n if (giveawayUsers.length > numberOfWinners) {\n for (var i = 0; i < numberOfWinners; i++) {\n var randomNumber = Math.floor(Math.random() * giveawayUsers.length);\n winnerArray.push(`${giveawayUsers[randomNumber]}`);\n giveawayUsers.splice(giveawayUsers.indexOf(randomNumber), randomNumber);\n }\n } else if (giveawayUsers.length <= numberOfWinners) {\n for (i = 0; i < giveawayUsers.length; i++) {\n winnerArray.push(`${giveawayUsers[i]}`);\n }\n }\n\n for (i = 0; i < winnerArray.length; i++) {\n winnerText = winnerText + winnerArray[i] + '\\n';\n }\n\n gw.description += `\\n\\nVencedor(es)..\\n${winnerText}`;\n giveawayMessage.edit({embed: gw});\n channelToFetch.send(`? Parabéns! ? \\n ${winnerText} \\nPrêmio **${giveawaysDue[counter][\"itemGivingAway\"]}**`);\n\n } else {\n gw.description += \"\\n\\nNinguém entrou no sorteio e, portanto, ninguém ganhou.\";\n giveawayMessage.edit({embed: gw});\n channelToFetch.send(`? Sorteio Finalizado ?\\n\\nNinguém entrou no sorteio e, portanto, ninguém ganhou.`);\n }\n }\n counter += 1;\n if (counter >= giveawaysDue.length) {\n clearInterval(interval);\n }\n }","behavior":"0","interpretation":"1","storage":"0","varName":"","VTypeSelect":"0","CVTypeValue":"","name":"Run Script"},{"time":"7","measurement":"1","name":"Wait"},{"storage":"3","varName":"giveawayRan","changeType":"0","value":"null","name":"Control Variable"}],"temp2":"America/New_York"},{"name":"SorteioStart","temp":"","event-type":"1","_id":"jEKcf","actions":[{"code":"const fs = require('fs');\n\nif (globalVars(\"giveawayStartRan\") == null) {\n this.storeValue(1, 3, \"giveawayStartRan\", cache);\n if (!fs.existsSync('./data/giveawayData.json')) {\n fs.writeFile(\"./data/giveawayData.json\", \"{}\", function(err) {\n if (err) {\n return console.log(err);\n }\n });\n }\n}","behavior":"0","interpretation":"0","storage":"0","varName":"","VTypeSelect":"0","CVTypeValue":"","name":"Run Script"}]}]